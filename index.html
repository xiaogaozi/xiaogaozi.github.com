
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Freedom</title>
  <meta name="author" content="xiaogaozi">

  
  <meta name="description" content="这是一个系列文章，大部分内容都来自我过去在小红书发现 Feed 团队工作期间的实践和经验。在介绍的过程中我会尽量不掺杂过多的业务细节，而专注于这背后我个人一些浅薄的设计思想，希望你在阅读完这些文章以后能够直接或者间接地拓展到不同的场景。 上一篇文章介绍了如何实现正排索引和二级索引， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="https://blog.xiaogaozi.org">
  <link href="/favicon.png" rel="shortcut icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Freedom" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='//fonts.googleapis.com/css?family=Rambla:700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-26507501-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body >
  <header role="banner"><hgroup>
  <h1><a href="/">Freedom</a></h1>
  
    <h2>淡泊以明志，宁静以致远。</h2>
  
</hgroup>

</header>
  <!-- <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.xiaogaozi.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav> -->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/05/13/how-to-design-a-distributed-index-framework-part-4/">如何设计与实现一个分布式索引框架（四）：索引更新</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-05-13T14:55:43+08:00" pubdate data-updated="true">May 13<sup>th</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>这是一个<a href="/categories/htdadif/">系列文章</a>，大部分内容都来自我过去在小红书发现 Feed 团队工作期间的实践和经验。在介绍的过程中我会尽量不掺杂过多的业务细节，而专注于这背后我个人一些浅薄的设计思想，希望你在阅读完这些文章以后能够直接或者间接地拓展到不同的场景。</p></blockquote>

<p><a href="/2020/04/24/how-to-design-a-distributed-index-framework-part-3/">上一篇文章</a>介绍了如何实现正排索引和二级索引，但要创建索引也得先有数据才行，本篇将会介绍数据是如何更新的。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2020/05/13/how-to-design-a-distributed-index-framework-part-4/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/05/11/maybe-news-issue-0/">Maybe News Issue #0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-05-11T14:44:52+08:00" pubdate data-updated="true">May 11<sup>th</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>前言：从这一期开始这个系列将会有一个正式的名字「Maybe News」，名字来源于我非常喜欢的一个国内的音乐厂牌<a href="https://en.wikipedia.org/wiki/Maybe_Mars">「兵马司」</a>（Maybe Mars）。本身我分享的内容也很有可能是一些旧闻，只不过对于我来说是还未了解的知识罢了。<a href="/2020/04/26/weekly-reading-list-issue-1/">上一期</a>的名字还是维持原样就不做修改。你也可以通过<a href="https://digest.xiaogaozi.org/maybe-news">邮件订阅</a>这个系列的文章。</p></blockquote>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2020/05/11/maybe-news-issue-0/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/04/26/weekly-reading-list-issue-1/">Weekly Reading List Issue #1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-04-26T12:22:08+08:00" pubdate data-updated="true">Apr 26<sup>th</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"></div>
  
  
    <footer>
      <a rel="full-article" href="/2020/04/26/weekly-reading-list-issue-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/04/24/how-to-design-a-distributed-index-framework-part-3/">如何设计与实现一个分布式索引框架（三）：正排索引</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-04-24T16:29:40+08:00" pubdate data-updated="true">Apr 24<sup>th</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>这是一个<a href="/categories/htdadif/">系列文章</a>，大部分内容都来自我过去在小红书发现 Feed 团队工作期间的实践和经验。在介绍的过程中我会尽量不掺杂过多的业务细节，而专注于这背后我个人一些浅薄的设计思想，希望你在阅读完这些文章以后能够直接或者间接地拓展到不同的场景。</p></blockquote>

<p><a href="/2020/04/22/how-to-design-a-distributed-index-framework-part-2/">上一篇文章</a>介绍了如何定义 schema、查询 API 以及怎样实现倒排索引，本篇将会着重介绍另一种重要的索引类型「正排索引」，以及跟正排索引密切相关的「二级索引」。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2020/04/24/how-to-design-a-distributed-index-framework-part-3/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/04/22/how-to-design-a-distributed-index-framework-part-2/">如何设计与实现一个分布式索引框架（二）：Schema、API 及倒排索引</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-04-22T18:16:55+08:00" pubdate data-updated="true">Apr 22<sup>nd</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>这是一个<a href="/categories/htdadif/">系列文章</a>，大部分内容都来自我过去在小红书发现 Feed 团队工作期间的实践和经验。在介绍的过程中我会尽量不掺杂过多的业务细节，而专注于这背后我个人一些浅薄的设计思想，希望你在阅读完这些文章以后能够直接或者间接地拓展到不同的场景。</p></blockquote>

<p>在<a href="/2020/04/21/how-to-design-a-distributed-index-framework-part-1/">上一篇文章</a>中简单介绍了什么是推荐系统以及实现一个推荐系统的核心组件有哪些，文章最后引入了一个非常重要的概念「索引」，本篇将会首先从框架使用者的角度介绍如何定义索引，框架有哪些 API 可以使用以及从设计者的角度介绍如何实现一个简单的倒排索引。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2020/04/22/how-to-design-a-distributed-index-framework-part-2/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2020/04/21/how-to-design-a-distributed-index-framework-part-1/">如何设计与实现一个分布式索引框架（一）：概览</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2020-04-21T17:08:24+08:00" pubdate data-updated="true">Apr 21<sup>st</sup>, 2020</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>这是一个<a href="/categories/htdadif/">系列文章</a>，大部分内容都来自我过去在小红书发现 Feed 团队工作期间的实践和经验。在介绍的过程中我会尽量不掺杂过多的业务细节<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>，而专注于这背后我个人一些浅薄的设计思想，希望你在阅读完这些文章以后能够直接或者间接地拓展到不同的场景。</p></blockquote>

<p>在介绍什么是索引框架之前先了解一下我们当时面临的业务场景<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>，业界现在的 <a href="https://en.wikipedia.org/wiki/Activity_stream">feed 流</a>产品已经逐步从非个性化全面过渡到个性化，所谓的个性化 feed 其实就是<strong>基于机器学习的推荐系统</strong>。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2020/04/21/how-to-design-a-distributed-index-framework-part-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2015/03/22/a-little-throught-about-microservices/">A Little Throught About Microservices</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-03-22T23:25:05+08:00" pubdate data-updated="true">Mar 22<sup>nd</sup>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>知乎在 4 年前已经开始尝试服务化，至今也经历了好几个架构的变迁演化。我大约是 2013 年开始在知乎负责服务化的工作，对服务化的理解也从最初的模糊逐渐变得清晰，前段时间看了一篇叫做 <a href="http://highscalability.com/blog/2014/4/8/microservices-not-a-free-lunch.html">Microservices &ndash; Not A Free Lunch!</a> 的文章，也想趁着这个机会梳理总结目前为止我的一些感悟和想法。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2015/03/22/a-little-throught-about-microservices/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/12/27/hadoop-best-practices-scheduling-in-yarn/">Hadoop Best Practices: Scheduling in YARN</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-27T19:01:55+08:00" pubdate data-updated="true">Dec 27<sup>th</sup>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>这篇文章基本上是对<a href="https://www.safaribooksonline.com/library/view/hadoop-the-definitive/9781491901687/ch04.html#YARNScheduling">《Hadoop: The Definitive Guide, 4th Edition》第 4 章</a>的转述，版权归作者所有。</p></blockquote>

<p>YARN 提供了三种任务调度策略：FIFO Scheduler，Capacity Scheduler 和 Fair Scheduler，下面会分别详细介绍。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2014/12/27/hadoop-best-practices-scheduling-in-yarn/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/12/15/saling-in-hk/">香港帆船培训记录</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-15T05:28:58+08:00" pubdate data-updated="true">Dec 15<sup>th</sup>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="center" src="https://farm4.staticflickr.com/3947/14961313994_9fea8b7503_z.jpg"></p>

<p>曾经对香港的印象就是便宜的苹果电脑和遍地的茶餐厅，竟忘记了这是一个靠海的岛屿。作为一个在西部长大的孩子，对于海总是有很多憧憬。从小到大见过很多地方的海，有浑浊的，有碧蓝的，有挤满游客的，也有波涛汹涌的。其实海不一定就是蓝色的，只是人们习惯性地把自己的愿望加诸在别的东西身上，所以如果某一天你见到了不是蓝色的海，请不要抱怨它。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2014/12/15/saling-in-hk/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/01/31/auto-open-browser-after-copy-url/">Auto Open Browser After Copy URL</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-31T05:07:36+08:00" pubdate data-updated="true">Jan 31<sup>st</sup>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前段时间看过一篇叫 <a href="http://sc5.io/blog/2014/01/automate-everyday-tasks">Automate Everyday Tasks</a> 的博客，其中的一些见解很有意思，我们日常工作中有很多细小但是重复的事情，如果能够将某些工作自动完成，会让生活更加舒适。我很喜欢 Mac 上一个叫 <a href="http://pilotmoon.com/popclip">PopClip</a> 的小 app，可以大大减少很多重复的操作。这篇博客就是介绍如何制作一个 app，当复制 URL 时自动在浏览器中打开。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/2014/01/31/auto-open-browser-after-copy-url/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>

    </div>
  </div>
  <footer role="contentinfo"><p>
  &copy; 2020 - xiaogaozi -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'xiaogaozi';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
